{"objective":
  {
    "id": <%= @objective.id %>,
    "name": "<%= @objective.name %>",
    "description": "<%= @objective.description %>",
    "subobjective_count": <%= @subobjectives.size %>,
    "obj_progress": <%= @objective.obj_progress %>,
    "sub_progress": <%= @objective.get_subobjectives_total_progress %>,
    "archived": <%= @objective.is_archived? %>,
    "longest_streak_last_14": <%= @objective.get_longest_streak_for_a_subobjective_in_last_days(14) %>,
    "created_at": "<%= @objective.created_at %>",
    "updated_at": "<%= @objective.updated_at %>"
  },
  "subobjectives":
  [
    <% @subobjectives.each do |s| %>
      {
        "id": <%= s[:id] %>,
        "name": "<%= s[:name] %>",
        "description": "<%= s[:description] %>",
        "progress": <%= s[:progress] %>
      }<%= ',' unless @subobjectives.last == s %>
    <% end %>
  ],
  "progress":
  [
    <% @progress.each do |p| %>
      {
        "subobjective_id": <%= p[:subobjective_id] %>,
        "name": "<%= p[:name] %>",
        "type": "<%= p[:type] %>",
        "amount": <%= p[:amount] %>,
        "created_at": "<%= p[:created_at] %>"
      }<%= ',' unless @progress.last == p %>
    <% end %>
  ]
}

{"objective":
  {
    "id": <%= @objective[:id] %>,
    "name": "<%= @objective[:name] %>",
    "description": "<%= @objective[:description] %>",
    "subobjective_count": <%= @objective[:subobjective_count] %>,
    "obj_progress": <%= @objective[:obj_progress] %>,
    "sub_progress": <%= @objective[:sub_progress] %>,
    "archived": <%= @objective[:archived] %>,
    "longest_streak": {
      "subobjective_id": <%= @objective[:longest_streak][:subobjective_id] %>,
      "subobjective_name": "<%= @objective[:longest_streak][:subobjective_name] %>",
      "streak": <%= @objective[:longest_streak][:streak] %>,
      "begin_date": "<%= @objective[:longest_streak][:begin_date] %>",
      "end_date": "<%= @objective[:longest_streak][:end_date] %>"
    },
    "current_streak": {
      "subobjective_id": <%= @objective[:current_streak][:subobjective_id] || -1 %>,
      "subobjective_name": "<%= @objective[:current_streak][:subobjective_name] %>",
      "streak": <%= @objective[:current_streak][:streak] %>,
      "begin_date": "<%= @objective[:current_streak][:begin_date] %>",
      "end_date": "<%= @objective[:current_streak][:end_date] %>"
    },
    "created_at": "<%= @objective[:created_at] %>",
    "updated_at": "<%= @objective[:updated_at] %>"
  },
  "subobjectives":
  [
    <% @subobjectives.each do |s| %>
      {
        "id": <%= s[:id] %>,
        "name": "<%= s[:name] %>",
        "description": "<%= s[:description] %>",
        "progress": <%= s[:progress] %>
      }<%= ',' unless @subobjectives.last == s %>
    <% end %>
  ],
  "progress":
  [
    <% @progress.each do |p| %>
      {
        "subobjective_id": <%= p[:subobjective_id] %>,
        "name": "<%= p[:name] %>",
        "type": "<%= p[:type] %>",
        "amount": <%= p[:amount] %>,
        "created_at": "<%= p[:created_at] %>"
      }<%= ',' unless @progress.last == p %>
    <% end %>
  ]
}
